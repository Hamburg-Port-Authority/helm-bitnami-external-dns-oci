name: bundle-chart

on:
  push:
    branches:
      - main


jobs:
  bundle-and-deploy:
    runs-on: ubuntu-latest
    container:
      image: hotbird.docker.nexus.macslabs.de/docker/ci-helm-image:fc6e855
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          submodules: 'true'
      - name: package
        id: package
        run: |
          ls -al
          ls -al ./bitnami_charts
          mkdir dist
          helm package --dependency-update ./bitnami_charts/bitnami/external_dns --destination dist
          ls -al dist